{% extends "paginas_post_venta/base/main.html" %}
{% block contenido %}
{% load static %}
<div class="main_contenededor poppins">
	<br><br><br><br>
	<h1 class="aligncenter decoracion_linea text-white">Proceso de revisión de devoluciones.</h1>
	<br><br><br>
	<div class="search-bar mt-sm-2">
		<h2 class="text-white">Solicitudes Pendientes:</h2>
		<br><br>
		<table class="table table-striped table-hover table table-bordered">
			<thead>
				<tr>
					<th scope="col">Rut</th>
					<th scope="col">Nombre</th>
					<th scope="col">Dirección</th>
				</tr>
			</thead>
			{% for cliente in lista_clientes %}
				<tbody>
					<tr>
						<td>{{ cliente }}</td>
						<td>{{ cliente.nombre_cl }}</td>
						<td>{{ cliente.direccion }}</td>
					</tr>
				</tbody>
			{% endfor %}
		</table>
		<br><br>
		<input type="text" class="form-control tamfuente22" name="q" id="id_buscar5" placeholder="Escriba el Rut de la petición a buscar...">
		<button class="btn btn-lg btn-primary btn-block" id="bton_buscar3" onclick="revision_search()" type="button">Buscar</button>
		<div id="error_msg5" class="aligncenter text-white"></div>
		<br><br>
		<div id="tabla_revision_cli">
			<h2 class="text-white">Datos del Cliente:</h2>
			<br>
			<table class="table table-striped dt-responsive nowrap table-bordered" id="tabla_cliente">
					<thead>
						<tr>
							<th scope="col">Rut</th>
							<th scope="col">Nombre Cliente</th>
							<th scope="col">Número telefono</th>
							<th scope="col">Email</th>
							<th scope="col">Dirección</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
			</table>
			<br>
			<div id="error_msg2" class="aligncenter"></div>
			<div id="tabla_Boletas_cd">
				<h2 class="text-white">Boletas:</h2>
				<br>
				<table class="table table-striped dt-responsive nowrap table-bordered" id="tabla_revision_boleta">
					<thead>
						<tr>
							<th scope="col"></th>
							<th scope="col">numero Boleta</th>
							<th scope="col">Fecha</th>
							<th scope="col">Total boleta anterior</th>
							<th scope="col">Monto Final boleta</th>
							<th scope="col">Monto a Devolver</th>	
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>
			</div>
			<div id="tabla_revision_productos_mostrar">
				<h2 class="text-white">Productos de Boleta en proceso de devolución:</h2>
				<br>
				<table class="table table-striped dt-responsive nowrap table-bordered" id="tabla_revision_prod">
					<thead>
						<tr>
							<th scope="col">Producto</th>
							<th scope="col">Precio c/u.</th>
							<th scope="col">Cantidad</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
				</table>			
				<br>
				<br>
			</div>
		</div>
		<br><br>
		<h2 class="text-white">Enviar orden de retiro:</h2>
		<br>
		<div class="container">
			<div class="row mt-3">
				<div class="col">
					<form class="form text-white" id="myForm">
						<label for="Rut" class="aligncenter">Rut:</label>
						<div class="form-group">
							<input type="text" name="rut" id="rut"><br>
						</div>
						<label for="nombre_cl" class="aligncenter">Nombre Cliente:</label>
						<div class="form-group">
							<input type="text" name="nombre_cl" id="nombre_cl"><br>
						</div>
						<label for="nombre_pro" class="aligncenter">Producto(s):</label>
						<div class="form-group">
							<input type="text" name="nombre_pro" id="nombre_pro"><br>
						</div>
						<label for="direccion" class="aligncenter">Dirección:</label>
						<div class="form-group">
							<input type="text" name="direccion" id="direccion"><br>
						</div>
						<br>
						<button class="btn btn-primary bton_color2"type="submit">Enviar</button>
					</form>
					<br><br>
				</div>
			</div>
		</div>
	
		<script>
			const myForm = document.getElementById('myForm');

			myForm.addEventListener('submit', function (e){
				e.preventDefault();

				const formData = new FormData(this);
				fetch("http://3.88.62.216/OrdenRetiro/",{
				method: 'POST',
	  			body: formData,
				}).then(function (response){
					return response.text();
				}).then(function (text){
					console.log(text);
				}).catch(function(error){
					console.error(error);
				})			
			});
		</script>
	</div>
</div>
{% endblock contenido %}
