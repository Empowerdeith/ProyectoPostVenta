{% extends "paginas_post_venta/base/main.html" %}
{% block contenido %}
{% load static %}
<div class="main_contenededor poppins">
	<br><br><br>
	<h1 class="aligncenter">Proceso de revisi贸n de devoluciones.</h1>
	<br><br>
	<div class="search-bar mt-sm-2">
		<h2 class="aligncenter">Solicitudes Pendientes:</h2>
		<br><br>
		<table class="table table-striped table-hover table table-bordered">
			<thead>
				<tr>
					<th scope="col">Rut</th>
					<th scope="col">Nombre</th>
					<th scope="col">Direccion</th>
				</tr>
			</thead>
			{% for cliente in lista_clientes %}
				<tbody>
					<tr>
						<td>{{ cliente }}</td>
						<td>{{ cliente.nombre_cl }}</td>
						<td>{{ cliente.direccion }}</td>
					</tr>
				</tbody>
			{% endfor %}
		</table>
		<br><br>
		<input type="text" class="form-control tamfuente22" name="q" id="id_buscar5" placeholder="Escriba el Rut de la petici贸n a buscar...">
		<button class="btn btn-lg btn-primary btn-block" id="bton_buscar3" onclick="revision_search()" type="button">Buscar</button>
		<div id="error_msg5" class="aligncenter"></div>
		<br><br>
		<div id="tabla_revision_cli">
			<h2>Datos del Cliente:</h2>
			<br>
			<table class="table table-striped dt-responsive nowrap table-bordered" id="tabla_cliente">
					<thead>
						<tr>
							<th scope="col">Rut</th>
							<th scope="col">Nombre Cliente</th>
							<th scope="col">Direcci贸n</th>
							<th scope="col">boletas</th>
						</tr>
					</thead>
					<tbody>
					</tbody>
			</table>
			<br>
			<div id="error_msg2" class="aligncenter"></div>
			<div id="tabla_revision_productos_mostrar">
			<h2>Productos de Boleta:</h2>
			<br>
			<table class="table table-striped dt-responsive nowrap table-bordered" id="tabla_revision_prod">
				<thead>
					<tr>
						<th scope="col">Producto</th>
						<th scope="col">Precio c/u.</th>
					</tr>
				</thead>
				<tbody>
				</tbody>
			</table>			
			<br>
			<br>
			</div>
		</div>
		<br><br>
		<h2>Enviar orden de retiro:</h2>
		<br>
		<div class="container">
			<div class="row mt-3">
				<div class="col">
					<form class="form" id="myForm">
						<label for="Rut">Rut:</label>
						<div class="form-group">
							<input type="text" name="rut" id="rut"><br>
						</div>
						<label for="nombre_cl">Nombre Cliente:</label>
						<div class="form-group">
							<input type="text" name="nombre_cl" id="nombre_cl"><br>
						</div>
						<label for="nombre_pro">Producto(s):</label>
						<div class="form-group">
							<input type="text" name="nombre_pro" id="nombre_pro"><br>
						</div>
						<label for="direccion">Direcci贸n:</label>
						<div class="form-group">
							<input type="text" name="direccion" id="direccion"><br>
						</div>
						<label for="telefono">Telefono:</label>
						<div class="form-group">
							<input type="text" id="telefono" name="telefono" placeholder="9-12345678" required>
						</div>
						<br>
						<button type="submit">Enviar</button>
					</form>
				</div>
			</div>
		</div>
	
		<script>
			const myForm = document.getElementById('myForm');

			myForm.addEventListener('submit', function (e){
				e.preventDefault();

				const formData = new FormData(this);
				fetch("http://3.88.62.216/OrdenRetiro/",{
				method: 'POST',
	  			body: formData,
				}).then(function (response){
					return response.text();
				}).then(function (text){
					console.log(text);
				}).catch(function(error){
					console.error(error);
				})			
			});
		</script>
	</div>
</div>
{% endblock contenido %}
